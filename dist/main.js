window.Forms=function(e){function t(t){for(var o,i,c=t[0],s=t[1],l=t[2],p=0,d=[];p<c.length;p++)i=c[p],r[i]&&d.push(r[i][0]),r[i]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);for(u&&u(t);d.length;)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,c=1;c<n.length;c++){var s=n[c];0!==r[s]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={0:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonpForms=window.webpackJsonpForms||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;return a.push([90,2]),n()}({0:function(e,t){e.exports=window.React},1:function(e,t){e.exports=window.antd},21:function(e,t){e.exports=window.ReactDOM},90:function(e,t,n){"use strict";n.r(t);var o,r=n(0),a=n.n(r),i=n(21),c=(n(22),n(1)),s=n(2),l=function(){return(l=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},u=function(){function e(){}return e.createField=function(e){var t={};return t.id=e.id,t.name=e.name,t.type=e.type,t.inputType=e.inputType,t.icon=e.icon,t.width=e.width,t.children=e.children,t.storage=e.storage,t.showLabel=Object(s.d)(e.showLabel,!0),t.showLegend=Object(s.d)(e.showLegend,!0),t.fieldOptions=new s.c(Object.assign({id:e.id},l({},e.fieldOptions))),t.condition=new s.b(e.id,e.condition),t.label=e.label,t.helpText=e.helpText,t.helpPlacement=e.helpPlacement,t.placeholder=e.placeholder,t.queryParam=e.queryParam,t.saveable=e.saveable,t.value=e.value,t},e}(),p=function(){function e(){}return e.createForm=function(e){var t={};t.id=e.id,t.exid=e.exid,t.desc=e.desc,t.name=e.name;var n=e.formLayoutOptions||{};t.formLayoutOptions={wrapperSpan:Object(s.d)(n.wrapperSpan,20),wrapperOffset:Object(s.d)(n.wrapperOffset,2),showPageBorders:Object(s.d)(n.showPageBorders,!0),showSectionBorders:Object(s.d)(n.showSectionBorders,!0),showPageTitles:Object(s.d)(n.showPageTitles,!0),showSectionTitles:Object(s.d)(n.showSectionTitles,!0),showSteps:Object(s.d)(n.showSteps,!0),validationDisablesPaging:Object(s.d)(n.validationDisablesPaging,!0)};var o={};e.tenant&&(o.context=e.tenant.content,o.stack=e.tenant.content,o.eid=e.tenant.content,o.mid=e.tenant.content),t.tenant=e.tenant;var r={};e.status&&(r.timezone=e.status.timezone,r.paused=e.status.paused,r.active=e.status.active,r.created=e.status.created,r.edited=e.status.edited,r.starts=e.status.starts,r.ends=e.status.ends),t.status=r;var a={};return a.title=e.content.title,a.subtitle=e.content.subtitle,a.labels=e.content.labels,a.offset=e.content.offset,a.width=e.content.width,a.sidebar=e.content.sidebar,a.scripts=e.content.scripts,a.styles=e.content.styles,a.datasets=e.content.datasets,a.paginate=e.content.paginate,a.css=e.content.css,a.header=e.content.header,a.footer=e.content.footer,a.trackingPixels=e.content.trackingPixels,a.pages=[],(e.content.pages||[]).forEach(function(e,t){var n={name:e.name,icon:e.icon,sections:[],type:e.type,title:e.title,subtitle:e.subtitle,wizard:e.wizard};e.sections.forEach(function(e,t){var o={id:e.id,name:e.name,gutter:e.gutter,columns:[]};e.columns.forEach(function(e,t){var n=new s.a(e.id,e.name,e.title,[]);e.fields.map(function(e,t){var o=u.createField(e);n.fields.push(o)}),o.columns.push(n)}),n.sections.push(o)}),a.pages.push(n)}),t.content=a,t},e}(),d=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),f=function(){return(f=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},m=function(e){function t(t){var n=e.call(this,t)||this;return n.props=t,n.state={hidden:!t.conditionals[n.props.field.id].result},n}return d(t,e),t.prototype.render=function(){var e=this.props,t=e.field,n=e.decorators,o=e.formLayout,a=e.eventHooks,i=t.type,s=n.getFieldDecorator,l=a(t.id).onChange;return this.props.conditionals[this.props.field.id].result&&r.createElement(c.Form.Item,f({label:t.label},o),("input"==i||"hidden"==i)&&s(t.id,t.fieldOptions)(r.createElement(c.Input,{onChange:l,type:t.inputType,placeholder:t.placeholder})),"checkbox"==i&&s(t.id,t.fieldOptions)(r.createElement(c.Checkbox,{onChange:l})),"number"==i&&s(t.id,t.fieldOptions)(r.createElement(c.InputNumber,{onChange:l})),"select"==i&&s(t.id,t.fieldOptions)(r.createElement(c.Select,{onChange:l},t.children.map(function(e,t){return r.createElement(c.Select.Option,{key:""+t,value:e.value},e.label)}))),"radiogroup"==i&&s(t.id,t.fieldOptions)(r.createElement(c.Radio.Group,{onChange:l,options:t.children})),"checkboxgroup"==i&&s(t.id,t.fieldOptions)(r.createElement(c.Checkbox.Group,{onChange:l,options:t.children})),"textarea"==i&&s(t.id,t.fieldOptions)(r.createElement(c.Input.TextArea,{onChange:l})),"datepicker"==i&&s(t.id,t.fieldOptions)(r.createElement(c.DatePicker,{onChange:l})),"monthpicker"==i&&s(t.id,t.fieldOptions)(r.createElement(c.DatePicker.MonthPicker,{onChange:l})),"rangepicker"==i&&s(t.id,t.fieldOptions)(r.createElement(c.DatePicker.RangePicker,{onChange:l})),"weekpicker"==i&&s(t.id,t.fieldOptions)(r.createElement(c.DatePicker.WeekPicker,{onChange:l})),"rate"==i&&s(t.id,t.fieldOptions)(r.createElement(c.Rate,{onChange:l})),"slider"==i&&s(t.id,t.fieldOptions)(r.createElement(c.Slider,{onChange:l})),"textblock"==i&&r.createElement("p",null,t.value))},t}(r.Component),h=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),y=function(e){function t(t){var n=e.call(this,t)||this;return n.props=t,n}return h(t,e),t.prototype.render=function(){var e=this.props,t=e.column,n=e.formLayout,o=e.span,a=e.conditionals,i=e.decorators,s=e.eventHooks;return r.createElement(c.Col,{span:o},t.fields.map(function(e,t){return r.createElement(m,{field:e,key:t,formLayout:n,conditionals:a,decorators:i,eventHooks:s})}))},t}(r.Component),g=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),v=function(e){function t(t){var n=e.call(this,t)||this;return n.props=t,n}return g(t,e),t.prototype.render=function(){var e=this.props,t=e.section,n=e.formLayout,o=e.conditionals,a=e.decorators,i=e.eventHooks,s=n.showSectionTitles,l=n.showSectionBorders,u=t.columns.length;return r.createElement(c.Card,{bordered:l,title:s?t.name:""},r.createElement(c.Row,{gutter:16},t.columns.map(function(e,t){return r.createElement(y,{formLayout:n,key:t,column:e,span:24/u,conditionals:o,decorators:a,eventHooks:i})})))},t}(r.Component),b=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),O=function(e){function t(t){var n=e.call(this,t)||this;return n.props=t,n}return b(t,e),t.prototype.render=function(){var e=this.props,t=e.page,n=e.formLayout,o=e.index,a=e.eventHooks,i=e.decorators,s=e.conditionals;return r.createElement("div",{className:"page-content"},r.createElement(c.Card,{title:n.showPageTitles?t.title:""},r.createElement("div",{className:"page",key:o.toString()},t.sections.map(function(e,t){return r.createElement(v,{section:e,key:t,conditionals:s,formLayout:n,decorators:i,eventHooks:a})}))))},t}(r.Component),w=function(){return(w=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},E=function(){function e(){}return e.registerFieldConditions=function(e,t,n,o){return t=w({},t,{dependencies:{},conditionals:{},ancestors:{}}),e.forEach(function(e){e.condition&&(n[""+e.id]=e.condition,t.conditionals[""+e.id]={result:e.condition.value(o.getFieldValue)},e.condition.ancestors&&(t.ancestors[e.id]=e.condition.ancestors))}),Object.keys(t.ancestors).forEach(function(e){t.ancestors[e].forEach(function(n){t.dependencies[n]=t.dependencies[n]?t.dependencies[n]:[],t.dependencies[n].push(e)})}),t},e.deregisterFieldConditions=function(e,t,n){var o=t.dependencies,r=t.conditionals,a=t.ancestors;return e.forEach(function(e){n[""+e.id]&&(delete n[""+e.id],delete r[""+e.id]),e.condition.ancestors&&delete a[e.id],Object.keys(o).forEach(function(t){o[t].indexOf(e.id)>-1&&(o[t]=Array.prototype.filter(function(t){e.id}))})}),{dependencies:o,conditionals:r,ancestors:a}},e}(),P=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();var _=function(e){function t(t){var n=e.call(this,t)||this;n.evaluators={},n.handleConfirmBlur=function(e){console.log("handleConfirmBlue");var t=e.target.value;n.setState({confirmDirty:n.state.confirmDirty||!!t})},n.handleSubmit=function(e){console.log("handleSubmit"),e.preventDefault();var t=n;n.props.form.validateFields(function(e,n){if(e){var o=t.state.fieldMeta.locations,r=Object.keys(e).map(function(e){return o[e].page}).reduce(function(e,t){return t?e<t?e:t:e});setTimeout(function(){t.setState({currentPage:r})})}else{var a=Object.assign({payload:n},{props:t.state.innerProps});console.log("Received values of form: ",a)}})},n.eventHooks=function(e){return{onChange:n.onChange.bind(n,e),onBlur:n.handleConfirmBlur.bind(n)}};var o=t.formData,r={currentPage:(o.content&&o.content.pages.length,0),numPages:o.content&&o.content.pages.length>0?o.content.pages.length:0,confirmDirty:!1,fieldMeta:{locations:{},allFields:[],pageFields:{}}};return o.content.pages.forEach(function(e,t){e.sections.forEach(function(e,n){e.columns.forEach(function(e,o){e.fields.forEach(function(e,a){r.fieldMeta.allFields.push(e),e.location=e.location={page:t,section:n,column:o,field:a},r.fieldMeta.locations[e.id]={page:t,section:n,column:o,field:a},r.fieldMeta.pageFields[t]=r.fieldMeta.pageFields[t]?r.fieldMeta.pageFields[t]:{names:[],ids:[]},r.fieldMeta.pageFields[t].names.push(e.name)})})})}),n.state=E.registerFieldConditions(r.fieldMeta.allFields,r,n.evaluators,n.props.form),n}return P(t,e),t.prototype.componentDidMount=function(){console.log("Form Mounted")},t.prototype.next=function(){console.log("nextPage");var e=this,t=this.state.currentPage;this.props.formData.formLayoutOptions.validationDisablesPaging?this.props.form.validateFields(this.state.fieldMeta.pageFields[t].names,function(n){n||e.setState({currentPage:t+1})}):this.setState({currentPage:t+1})},t.prototype.prev=function(){console.log("prevPage");var e=this.state.currentPage-1;this.setState({currentPage:e})},t.prototype.onChange=function(e){var t=this;console.log("onChange",e),setTimeout(function(){(t.state.dependencies[e]||[]).forEach(function(e){var n=Object.assign({},t.state);n.conditionals[e].result=t.evaluators[e].value(t.props.form.getFieldValue),t.setState(n)})},0)},t.prototype.render=function(){var e,t=this,n=this.props.formData;return r.createElement("div",{className:"form-wrapper"},n.content.title&&r.createElement(c.Card,null,r.createElement("h2",null,n.content.title),r.createElement("br",null),r.createElement("h3",null,n.content.subtitle)),n.formLayoutOptions.showSteps&&r.createElement(c.Row,null,r.createElement(c.Col,{span:24},r.createElement(c.Card,null,r.createElement(c.Steps,{size:"small",current:this.state.currentPage},n.content.pages.map(function(e,t){return r.createElement(c.Steps.Step,{title:e.title,key:t})}))))),r.createElement(c.Row,null,r.createElement(c.Col,{span:24},r.createElement(c.Form,{onSubmit:this.handleSubmit,layout:this.props.layout},n.content.pages.map(function(e,n){var o=t.state.currentPage,a=t.props.formData.formLayoutOptions;return r.createElement("div",{className:"page-wrapper",key:n,style:{visibility:o==n?"visible":"hidden",display:o==n?"block":"none"}},r.createElement(O,{page:e,conditionals:t.state.conditionals,index:n,formLayout:a,decorators:t.props.form,eventHooks:t.eventHooks}))}),r.createElement("div",{className:"page-actions"},r.createElement(c.Card,null,r.createElement(c.Row,null,r.createElement(c.Col,{span:24,style:{textAlign:"right"}},r.createElement(c.Form.Item,null,r.createElement(c.Button,{disabled:(e=this.props.form.getFieldsError(),Object.keys(e).some(function(t){return e[t]})),type:"primary",style:{marginLeft:8},htmlType:"submit",className:"action-button"},"Submit"),this.state.currentPage<this.state.numPages-1&&r.createElement(c.Button,{type:"primary",style:{marginLeft:8},className:"action-button",onClick:function(){return t.next()}},"Next"),this.state.currentPage>0&&this.state.numPages>1&&r.createElement(c.Button,{type:"primary",className:"action-button",onClick:function(){return t.prev()}},"Prev"))))))))))},t}(r.Component),k=c.Form.create()(_),j=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),C=function(e){function t(t){var n=e.call(this,t)||this;return n.state={formData:p.createForm(n.props.formData)},n}return j(t,e),t.prototype.render=function(){var e=this.state.formData;return r.createElement(c.Layout,{style:{height:"100vh"}},r.createElement(c.Row,null,r.createElement("br",null)),r.createElement(c.Row,{justify:"space-around"},r.createElement(c.Col,{span:e.formLayoutOptions.wrapperSpan,offset:e.formLayoutOptions.wrapperOffset},r.createElement(k,{formData:e}))),r.createElement(c.Row,null))},t}(r.Component);function S(e,t){Object(i.render)(a.a.createElement(C,{formData:t}),document.querySelector(e))}n.d(t,"renderApp",function(){return S})}});
//# sourceMappingURL=main.js.map